(this.webpackJsonp=this.webpackJsonp||[]).push([["after-pay"],{"2Q6F":function(e,t,r){"use strict";r.r(t);var n=r("SwLI");class a extends n.default{constructor(e,t,r="afterpay"){super(e,t,r),this.name="AfterPayService"}capture(e,t={},r={}){const n=this.getBasicHeaders(r);let a={};return a=Object.assign(a,t),this.httpClient.post(`/_action/${this.getApiBasePath()}/capture`,{id:e},{params:a,headers:n})}}Shopware.Application.addServiceProvider("AfterPayService",e=>new a(Shopware.Application.getContainer("init").httpClient,Shopware.Service("loginService")));var i=r("l4Pk"),s=r.n(i);const{Component:o,Mixin:c}=Shopware;o.override("sw-order-list",{template:s.a,inject:["AfterPayService"],mixins:[c.getByName("notification")],data:()=>({showCaptureModal:!1}),methods:{capturable:e=>e.customFields&&void 0!==e.customFields.afterpay_orders_transaction_id&&e.customFields.afterpay_orders_transaction_id&&(void 0===e.customFields.afterpay_orders_captured||0==e.customFields.afterpay_orders_captured),onCapture(e){this.showCaptureModal=e},onCloseCaptureModal(){this.showCaptureModal=!1},onConfirmCapture(e){return this.showCaptureModal=!1,this.AfterPayService.capture(e.id).then(t=>{t.data.success?(this.createNotificationSuccess({title:this.$tc("global.default.success"),message:this.$tc("afterpay.sw-order.list.messageCaptureSuccess",0,{orderNumber:e.orderNumber})}),this.getList()):this.createNotificationError({title:this.$tc("global.default.error"),message:this.$tc("afterpay.sw-order.list.messageCaptureError",0,{orderNumber:e.orderNumber})})}).catch(t=>{throw this.createNotificationError({title:this.$tc("global.default.error"),message:this.$tc("afterpay.sw-order.list.messageCaptureError",0,{orderNumber:e.orderNumber})}),t})}}});var u=r("rh/S"),l=r("hZYM");Shopware.Locale.extend("de-DE",u),Shopware.Locale.extend("en-GB",l)},CkOj:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r("lSNA"),a=r.n(n),i=r("lO2t"),s=r("lYO9");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e){var t=function(e){var t;if(i.a.isString(e))try{t=JSON.parse(e)}catch(e){return!1}else{if(!i.a.isObject(e)||i.a.isArray(e))return!1;t=e}return t}(e);if(!t)return null;if(!0===t.parsed||!function(e){return void 0!==e.data||void 0!==e.errors||void 0!==e.links||void 0!==e.meta}(t))return t;var r=function(e){var t={links:null,errors:null,data:null,associations:null,aggregations:null};if(e.errors)return t.errors=e.errors,t;var r=function(e){var t=new Map;if(!e||!e.length)return t;return e.forEach((function(e){var r="".concat(e.type,"-").concat(e.id);t.set(r,e)})),t}(e.included);if(i.a.isArray(e.data))t.data=e.data.map((function(e){var n=l(e,r);return Object(s.g)(n,"associationLinks")&&(t.associations=c(c({},t.associations),n.associationLinks),delete n.associationLinks),n}));else if(i.a.isObject(e.data)){var n=l(e.data,r);Object.prototype.hasOwnProperty.call(n,"associationLinks")&&(t.associations=c(c({},t.associations),n.associationLinks),delete n.associationLinks),t.data=n}else t.data=null;e.meta&&Object.keys(e.meta).length&&(t.meta=p(e.meta));e.links&&Object.keys(e.links).length&&(t.links=e.links);e.aggregations&&Object.keys(e.aggregations).length&&(t.aggregations=e.aggregations);return t}(t);return r.parsed=!0,r}function l(e,t){var r={id:e.id,type:e.type,links:e.links||{},meta:e.meta||{}};if(e.attributes&&Object.keys(e.attributes).length>0){var n=p(e.attributes);r=c(c({},r),n)}if(e.relationships){var a=function(e,t){var r={},n={};return Object.keys(e).forEach((function(a){var s=e[a];if(s.links&&Object.keys(s.links).length&&(n[a]=s.links.related),s.data){var o=s.data;i.a.isArray(o)?r[a]=o.map((function(e){return d(e,t)})):i.a.isObject(o)?r[a]=d(o,t):r[a]=null}})),{mappedRelations:r,associationLinks:n}}(e.relationships,t);r=c(c(c({},r),a.mappedRelations),{associationLinks:a.associationLinks})}return r}function p(e){var t={};return Object.keys(e).forEach((function(r){var n=e[r],a=r.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}));t[a]=n})),t}function d(e,t){var r="".concat(e.type,"-").concat(e.id);return t.has(r)?l(t.get(r),t):e}},SwLI:function(e,t,r){"use strict";r.r(t);var n=r("lwsE"),a=r.n(n),i=r("W8MJ"),s=r.n(i),o=r("CkOj"),c=function(){function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"application/vnd.api+json";a()(this,e),this.httpClient=t,this.loginService=r,this.apiEndpoint=n,this.contentType=i}return s()(e,[{key:"getList",value:function(t){var r=t.page,n=void 0===r?1:r,a=t.limit,i=void 0===a?25:a,s=t.sortBy,o=t.sortDirection,c=void 0===o?"asc":o,u=t.sortings,l=t.queries,p=t.term,d=t.criteria,h=t.aggregations,f=t.associations,g=t.headers,v=t.versionId,m=t.ids,y=t["total-count-mode"],b=void 0===y?0:y;this.showDeprecationWarning("getList");var w=this.getBasicHeaders(g),O={page:n,limit:i};return u?O.sort=u:s&&s.length&&(O.sort=("asc"===c.toLowerCase()?"":"-")+s),m&&(O.ids=m.join("|")),p&&(O.term=p),d&&(O.filter=[d.getQuery()]),h&&(O.aggregations=h),f&&(O.associations=f),v&&(w=Object.assign(w,e.getVersionHeader(v))),l&&(O.query=l),b&&(O["total-count-mode"]=b),O.term&&O.term.length||O.filter&&O.filter.length||O.aggregations||O.sort||O.queries||O.associations?this.httpClient.post("".concat(this.getApiBasePath(null,"search")),O,{headers:w}).then((function(t){return e.handleResponse(t)})):this.httpClient.get(this.getApiBasePath(),{params:O,headers:w}).then((function(t){return e.handleResponse(t)}))}},{key:"getById",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.showDeprecationWarning("getById"),!t)return Promise.reject(new Error("Missing required argument: id"));var a=r,i=this.getBasicHeaders(n);return this.httpClient.get(this.getApiBasePath(t),{params:a,headers:i}).then((function(t){return e.handleResponse(t)}))}},{key:"updateById",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(this.showDeprecationWarning("updateById"),!t)return Promise.reject(new Error("Missing required argument: id"));var i=n,s=this.getBasicHeaders(a);return this.httpClient.patch(this.getApiBasePath(t),r,{params:i,headers:s}).then((function(t){return e.handleResponse(t)}))}},{key:"deleteAssociation",value:function(e,t,r,n){if(this.showDeprecationWarning("deleteAssociation"),!e||!r||!r)return Promise.reject(new Error("Missing required arguments."));var a=this.getBasicHeaders(n);return this.httpClient.delete("".concat(this.getApiBasePath(e),"/").concat(t,"/").concat(r),{headers:a}).then((function(e){return e.status>=200&&e.status<300?Promise.resolve(e):Promise.reject(e)}))}},{key:"create",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.showDeprecationWarning("create");var a=r,i=this.getBasicHeaders(n);return this.httpClient.post(this.getApiBasePath(),t,{params:a,headers:i}).then((function(t){return e.handleResponse(t)}))}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.showDeprecationWarning("delete"),!e)return Promise.reject(new Error("Missing required argument: id"));var n=Object.assign({},t),a=this.getBasicHeaders(r);return this.httpClient.delete(this.getApiBasePath(e),{params:n,headers:a})}},{key:"clone",value:function(t){return this.showDeprecationWarning("clone"),t?this.httpClient.post("/_action/clone/".concat(this.apiEndpoint,"/").concat(t),null,{headers:this.getBasicHeaders()}).then((function(t){return e.handleResponse(t)})):Promise.reject(new Error("Missing required argument: id"))}},{key:"versionize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.showDeprecationWarning("versionize");var n="/_action/version/".concat(this.apiEndpoint,"/").concat(e),a=Object.assign({},t),i=this.getBasicHeaders(r);return this.httpClient.post(n,{},{params:a,headers:i})}},{key:"mergeVersion",value:function(t,r,n,a){if(this.showDeprecationWarning("mergeVersion"),!t)return Promise.reject(new Error("Missing required argument: id"));if(!r)return Promise.reject(new Error("Missing required argument: versionId"));var i=Object.assign({},n),s=Object.assign(e.getVersionHeader(r),this.getBasicHeaders(a)),o="_action/version/merge/".concat(this.apiEndpoint,"/").concat(r);return this.httpClient.post(o,{},{params:i,headers:s})}},{key:"getApiBasePath",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="";return t&&t.length&&(r+="".concat(t,"/")),e&&e.length>0?"".concat(r).concat(this.apiEndpoint,"/").concat(e):"".concat(r).concat(this.apiEndpoint)}},{key:"getBasicHeaders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={Accept:this.contentType,Authorization:"Bearer ".concat(this.loginService.getToken()),"Content-Type":"application/json"};return Object.assign({},t,e)}},{key:"showDeprecationWarning",value:function(e){Shopware.Utils.debug.warn("".concat(this.apiEndpoint," - Api Service"),"The ".concat(e," function is deprecated. Please use the 'repository.data.js' class for data handling of entities."))}},{key:"getApiVersion",value:function(){return Shopware.Context.api.apiVersion-1}},{key:"apiEndpoint",get:function(){return this.endpoint},set:function(e){this.endpoint=e}},{key:"httpClient",get:function(){return this.client},set:function(e){this.client=e}},{key:"contentType",get:function(){return this.type},set:function(e){this.type=e}}],[{key:"handleResponse",value:function(t){if(null===t.data||void 0===t.data)return t;var r=t.data,n=t.headers;return n&&n["content-type"]&&"application/vnd.api+json"===n["content-type"]&&(r=e.parseJsonApiData(r)),r}},{key:"parseJsonApiData",value:function(e){return Object(o.a)(e)}},{key:"getVersionHeader",value:function(e){return{"sw-version-id":e}}}]),e}();t.default=c},hZYM:function(e){e.exports=JSON.parse('{"afterpay":{"sw-order":{"list":{"contextMenuCapture":"Capture","textCaptureConfirm":"Do you really want to capture this order ({orderNumber})?","buttonCancel":"Cancel","buttonCapture":"Capture","messageCaptureSuccess":"The order ({orderNumber}) was successfully captured.","messageCaptureError":"The order ({orderNumber}) was not captured."}}}}')},l4Pk:function(e,t){e.exports='{% block sw_order_list_grid_columns_actions_view %}\n    {% parent %}\n\n    <sw-context-menu-item\n            v-if="capturable(item)"\n            class="afterpay-sw-order-list__order-capture-action"\n            @click="onCapture(item.id)"\n            variant="primary">\n        {{ $tc(\'afterpay.sw-order.list.contextMenuCapture\') }}\n    </sw-context-menu-item>\n{% endblock %}\n\n{% block sw_order_list_delete_modal %}\n    {% parent %}\n\n    {% block afterpay_sw_order_list_capture_modal %}\n        <sw-modal class="afterpay-sw-order-list__capture_modal"\n                    v-if="showCaptureModal === item.id"\n                    @modal-close="onCloseCaptureModal"\n                    :title="$tc(\'global.default.warning\')"\n                    variant="small">\n\n            <p class="afterpay-sw-order-list__confirm-capture-text">\n                {{ $tc(\'afterpay.sw-order.list.textCaptureConfirm\', 0, { orderNumber: `${item.orderNumber}` }) }}\n            </p>\n\n            {% block afterpay_sw_order_list_capture_modal_footer %}\n                <template #modal-footer>\n                    {% block afterpay_sw_order_list_capture_modal_cancel %}\n                        <sw-button class="afterpay-sw-order-list__cancel_button"\n                                   @click="onCloseCaptureModal" size="small">\n                            {{ $tc(\'afterpay.sw-order.list.buttonCancel\') }}\n                        </sw-button>\n                    {% endblock %}\n\n                    {% block afterpay_sw_order_list_capture_modal_confirm %}\n                        <sw-button-process class="afterpay-sw-order-list__capture_button"\n                            @click="onConfirmCapture(item)" variant="primary" size="small">\n                            {{ $tc(\'afterpay.sw-order.list.buttonCapture\') }}\n                        </sw-button-process>\n                    {% endblock %}\n                </template>\n            {% endblock %}\n        </sw-modal>\n    {% endblock %}\n{% endblock %}'},lO2t:function(e,t,r){"use strict";r.d(t,"b",(function(){return _}));var n=r("GoyQ"),a=r.n(n),i=r("YO3V"),s=r.n(i),o=r("E+oP"),c=r.n(o),u=r("wAXd"),l=r.n(u),p=r("Z0cm"),d=r.n(p),h=r("lSCD"),f=r.n(h),g=r("YiAA"),v=r.n(g),m=r("4qC0"),y=r.n(m),b=r("Znm+"),w=r.n(b),O=r("Y+p1"),k=r.n(O),j=r("UB5X"),C=r.n(j);function _(e){return void 0===e}t.a={isObject:a.a,isPlainObject:s.a,isEmpty:c.a,isRegExp:l.a,isArray:d.a,isFunction:f.a,isDate:v.a,isString:y.a,isBoolean:w.a,isEqual:k.a,isNumber:C.a,isUndefined:_}},lYO9:function(e,t,r){"use strict";r.d(t,"h",(function(){return w})),r.d(t,"i",(function(){return O})),r.d(t,"a",(function(){return k})),r.d(t,"d",(function(){return j})),r.d(t,"k",(function(){return C})),r.d(t,"j",(function(){return _})),r.d(t,"g",(function(){return P})),r.d(t,"b",(function(){return S})),r.d(t,"c",(function(){return A})),r.d(t,"f",(function(){return E})),r.d(t,"e",(function(){return B}));var n=r("lSNA"),a=r.n(n),i=r("QkVN"),s=r.n(i),o=r("JBE3"),c=r.n(o),u=r("BkRI"),l=r.n(u),p=r("mwIZ"),d=r.n(p),h=r("D1y2"),f=r.n(h),g=r("JZM8"),v=r.n(g),m=r("lO2t");function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){a()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}s.a,s.a,l.a,d.a,f.a,v.a;var w=s.a,O=c.a,k=l.a,j=d.a,C=f.a,_=v.a;function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return JSON.parse(JSON.stringify(e))}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return O(e,t,(function(e,t){if(Array.isArray(e))return e.concat(t)}))}function E(e,t){return e===t?{}:m.a.isObject(e)&&m.a.isObject(t)?m.a.isDate(e)||m.a.isDate(t)?e.valueOf()===t.valueOf()?{}:t:Object.keys(t).reduce((function(r,n){if(!P(e,n))return b(b({},r),{},a()({},n,t[n]));if(m.a.isArray(t[n])){var i=B(e[n],t[n]);return Object.keys(i).length>0?b(b({},r),{},a()({},n,t[n])):r}if(m.a.isObject(t[n])){var s=E(e[n],t[n]);return!m.a.isObject(s)||Object.keys(s).length>0?b(b({},r),{},a()({},n,s)):r}return e[n]!==t[n]?b(b({},r),{},a()({},n,t[n])):r}),{}):t}function B(e,t){if(e===t)return[];if(!m.a.isArray(e)||!m.a.isArray(t))return t;if(e.length<=0&&t.length<=0)return[];if(e.length!==t.length)return t;if(!m.a.isObject(t[0]))return t.filter((function(t){return!e.includes(t)}));var r=[];return t.forEach((function(n,a){var i=E(e[a],t[a]);Object.keys(i).length>0&&r.push(t[a])})),r}},"rh/S":function(e){e.exports=JSON.parse('{"afterpay":{"sw-order":{"list":{"contextMenuCapture":"Capture","textDeleteConfirm":"Do you really want to delete this order ({orderNumber})?","buttonCancel":"Cancel","buttonCapture":"Capture","messageCaptureSuccess":"The order ({orderNumber}) was successfully captured.","messageCaptureError":"The order ({orderNumber}) was not captured."}}}}')}},[["2Q6F","runtime","vendors-node"]]]);